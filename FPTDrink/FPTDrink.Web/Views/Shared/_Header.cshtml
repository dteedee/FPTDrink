<a href="#main-content" class="skip-link">Bỏ qua đến nội dung chính</a>
<!-- ========== HEADER ========== -->
<header class="navbar-header shadow-lg">
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">
        <img src="~/images/logocf.png" alt="FPTDrink Logo" />
        <span>FPTDrink</span>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon text-light"></span>
      </button>

      <div class="navbar-collapse collapse">
        <div class="header-nav-wrapper">
          <ul class="navbar-nav align-items-lg-center gap-2 mb-3 mb-lg-0 flex-lg-row flex-column">
            @{
              var currentController = ViewContext.RouteData.Values["controller"]?.ToString() ?? "";
              var currentAction = ViewContext.RouteData.Values["action"]?.ToString() ?? "";
            }
            <li class="nav-item">
              <a class="nav-link @(string.Equals(currentController, "Home", StringComparison.OrdinalIgnoreCase) && string.Equals(currentAction, "Index", StringComparison.OrdinalIgnoreCase) ? "active" : "")" 
                 asp-controller="Home" asp-action="Index">
                <i class="bx bx-home me-1"></i>Trang chủ
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link @(string.Equals(currentController, "Products", StringComparison.OrdinalIgnoreCase) ? "active" : "")" 
                 asp-controller="Products" asp-action="Index">
                <i class="bx bx-package me-1"></i>Sản phẩm
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link @(string.Equals(currentController, "Menu", StringComparison.OrdinalIgnoreCase) ? "active" : "")" 
                 asp-controller="Menu" asp-action="Index">
                <i class="bx bx-food-menu me-1"></i>Thực đơn
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link @(string.Equals(currentController, "ShoppingCart", StringComparison.OrdinalIgnoreCase) ? "active" : "")" 
                 asp-controller="ShoppingCart" asp-action="Index">
                <i class="bx bx-cart me-1"></i>Giỏ hàng
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link @(string.Equals(currentController, "TraCuuDonHang", StringComparison.OrdinalIgnoreCase) ? "active" : "")"
                 asp-controller="TraCuuDonHang" asp-action="Index">
                <i class="bx bx-search-alt me-1"></i>Tra cứu
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link @(string.Equals(currentController, "Contact", StringComparison.OrdinalIgnoreCase) ? "active" : "")" 
                 asp-controller="Contact" asp-action="Index">
                <i class="bx bx-phone me-1"></i>Liên hệ
              </a>
            </li>
          </ul>

          <div class="header-actions">
            <form class="header-search-form" method="get" asp-controller="Products" asp-action="Index">
              <div class="input-group">
                <span class="input-group-text bg-transparent border-0 text-light"><i class="bx bx-search"></i></span>
                <input class="form-control border-0" type="search" name="q" placeholder="Tìm đồ uống..." aria-label="Search" />
                <button class="btn btn-primary" type="submit">Tìm</button>
              </div>
            </form>
            @{
              var isCustomerAuthenticated = Context.IsCustomerAuthenticated();
              var customerName = Context.GetCustomerName();
            }
            @if (isCustomerAuthenticated)
            {
              <div class="dropdown">
                <button class="btn btn-coffee header-user-btn dropdown-toggle" type="button" id="userMenuDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bx bx-user me-2"></i>@(customerName ?? "Tài khoản")
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenuDropdown">
                  <li><a class="dropdown-item" asp-controller="CustomerAccount" asp-action="Index"><i class="bx bx-user me-2"></i>Tài khoản của tôi</a></li>
                  <li><a class="dropdown-item" asp-controller="CustomerOrders" asp-action="Index"><i class="bx bx-package me-2"></i>Đơn hàng của tôi</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <form asp-controller="CustomerAuth" asp-action="Logout" method="post" class="d-inline">
                      @Html.AntiForgeryToken()
                      <button type="submit" class="dropdown-item text-danger">
                        <i class="bx bx-log-out me-2"></i>Đăng xuất
                      </button>
                    </form>
                  </li>
                </ul>
              </div>
            }
            else
            {
              <a class="btn btn-outline-light header-register-btn" asp-controller="CustomerAuth" asp-action="Register">
                <i class="bx bx-user-plus me-2"></i>Đăng ký
              </a>
              <a class="btn btn-coffee header-login-btn" asp-controller="CustomerAuth" asp-action="Login">
                <i class="bx bx-log-in-circle me-2"></i>Đăng nhập
              </a>
            }
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
